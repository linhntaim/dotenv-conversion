"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}var NUMBER_REGEX=/^[+-]?\d+(\.\d+)?(e[+-]?\d+)?$/i;var DotEnvConversion=/*#__PURE__*/function(){function DotEnvConversion(){_classCallCheck(this,DotEnvConversion);this.defaultOptions={methods:{auto:function auto(value){if(!value){return value}var vCased=value.toLowerCase().trim();switch(true){case vCased==="null":return this["null"]();case["true","false","yes","no"].includes(vCased):return this.bool(value);case NUMBER_REGEX.test(vCased):return this.number(value);case vCased.startsWith("raw:"):return this.raw(value.substr(4));case vCased.startsWith("bool:"):return this.bool(value.substr(5));case vCased.startsWith("number:"):return this.number(value.substr(7));case vCased.startsWith("array:"):return this.array(value.substr(6));case vCased.startsWith("json:"):return this.json(value.substr(5));default:return this.json(value);}},raw:function raw(value){return value},"null":function _null(){return""},bool:function bool(value){if(!value){return false}value=value.toLowerCase().trim();return!["","false","nan","no","not","none","null","undefined"].includes(value)&&(!NUMBER_REGEX.test(value)||parseFloat(value)!==0)},number:function number(value){if(!value){return 0}value=parseFloat(value);return isNaN(value)?0:value},array:function array(value){if(!value){return[]}return function(){var values=[];var c=0;value.split("\\,").map(function(v){return v.split(",")}).forEach(function(vs){vs.forEach(function(v,i){i?values.push(v):c&&!i?values[values.length-1]+=","+v:values.push(v)});c=values.length});return values}()},json:function json(value){if(!value){return{}}try{return JSON.parse(value)}catch(e){return value}}},specs:{},prevents:[]};this.options={};this.env={}}_createClass(DotEnvConversion,[{key:"setOptions",value:function setOptions(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var override=options.override?options.override:null;delete options.override;this.options=Object.assign({},this.defaultOptions,options);if(override){Object.assign(this.options.methods,override)}return this}},{key:"make",value:function make(){var dotenvConfigOutput=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.setOptions(options);this.env={};var parsed="parsed"in dotenvConfigOutput?dotenvConfigOutput.parsed:{};for(var name in parsed){parsed[name]=this.convert(name,parsed[name])}var ignoreProcessEnv="ignoreProcessEnv"in dotenvConfigOutput?dotenvConfigOutput.ignoreProcessEnv:false;var environment=process.env;if(ignoreProcessEnv){for(var _name in environment){this.env[_name]=_name in parsed?parsed[_name]:this.convert(_name,environment[_name])}}else{for(var _name2 in environment){var value=_name2 in parsed?parsed[_name2]:this.convert(_name2,environment[_name2]);this.env[_name2]=value;environment[_name2]=["boolean","number","string"].includes(_typeof(value))?value:JSON.stringify(value)}}return dotenvConfigOutput}},{key:"convert",value:function convert(name,value){if(this.options.prevents.includes(name)){return value}var method=name in this.options.specs?this.options.specs[name]:"auto";switch(_typeof(method)){case"string":if(method in this.options.methods){return this.options.methods[method](value)}return value;case"function":return method(value);default:return value;}}},{key:"getenv",value:function getenv(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var def=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return name?name in this.env?this.env[name]:def:this.env}}]);return DotEnvConversion}();exports["default"]=DotEnvConversion;
//# sourceMappingURL=dotenv-conversion.js.map