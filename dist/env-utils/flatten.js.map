{"version":3,"file":"flatten.js","names":["fs","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","o","Symbol","iterator","constructor","flattenValue","value","typeOf","Number","Boolean","String","toString","BigInt","concat","json","match","slice","replaceAll","JSON","stringify","flattenValues","values","flatteningValues","escapeValue","test","flatten","content","flattenTo","file","arguments","length","undefined","writeFileSync"],"sources":["../../src/env-utils/flatten.js"],"sourcesContent":["import * as fs from 'fs'\r\n\r\nexport function flattenValue(value) {\r\n    const typeOf = typeof value\r\n    switch (true) {\r\n        /**\r\n         * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures\r\n         */\r\n\r\n        case value === null:\r\n        case typeOf === 'function':\r\n            return 'null'\r\n\r\n        case typeOf === 'undefined':\r\n            return 'undefined'\r\n\r\n        case typeOf === 'string':\r\n            return value\r\n\r\n        case typeOf === 'number':\r\n        case value instanceof Number:\r\n        case typeOf === 'boolean':\r\n        case value instanceof Boolean:\r\n        case typeOf === 'symbol':\r\n        case value instanceof String:\r\n            return value.toString()\r\n\r\n        case typeOf === 'bigint':\r\n        case value instanceof BigInt:\r\n            return `${value.toString()}n`\r\n\r\n        default:\r\n            return (json => {\r\n                return json.match(/^\".*\"$/)\r\n                    ? json.slice(1, -1).replaceAll('\\\\\"', '\"')\r\n                    : json\r\n            })(JSON.stringify(value))\r\n    }\r\n}\r\n\r\nexport function flattenValues(values) {\r\n    const flatteningValues = {}\r\n    for (const key in values) {\r\n        flatteningValues[key] = flattenValue(values[key])\r\n    }\r\n    return flatteningValues\r\n}\r\n\r\nfunction escapeValue(value) {\r\n    if (/[\\s#]+/.test(value)) {\r\n        return `\"${value.replaceAll('\\\\', '\\\\\\\\').replaceAll('\"', '\\\\\"')}\"`\r\n    }\r\n    return value\r\n}\r\n\r\nfunction flatten(values) {\r\n    let content = ''\r\n    for (const key in values) {\r\n        content += `${key}=${escapeValue(flattenValue(values[key]))}\\n`\r\n    }\r\n    return content\r\n}\r\n\r\nexport function flattenTo(values, file = '.env') {\r\n    fs.writeFileSync(file, flatten(values))\r\n}\r\n"],"mappings":"wKAAA,IAAAA,EAAA,CAAAC,uBAAA,CAAAC,OAAA,QAAwB,SAAAC,yBAAAC,WAAA,YAAAC,OAAA,8BAAAC,iBAAA,KAAAD,OAAA,KAAAE,gBAAA,KAAAF,OAAA,QAAAF,wBAAA,UAAAA,yBAAAC,WAAA,SAAAA,WAAA,CAAAG,gBAAA,CAAAD,iBAAA,GAAAF,WAAA,WAAAH,wBAAAO,GAAA,CAAAJ,WAAA,MAAAA,WAAA,EAAAI,GAAA,EAAAA,GAAA,CAAAC,UAAA,SAAAD,GAAA,IAAAA,GAAA,SAAAE,OAAA,CAAAF,GAAA,qBAAAA,GAAA,gCAAAA,GAAA,MAAAG,KAAA,CAAAR,wBAAA,CAAAC,WAAA,KAAAO,KAAA,EAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,UAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,MAAAM,MAAA,QAAAC,qBAAA,CAAAC,MAAA,CAAAC,cAAA,EAAAD,MAAA,CAAAE,wBAAA,SAAAC,GAAA,IAAAX,GAAA,KAAAW,GAAA,cAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,CAAAW,GAAA,OAAAI,IAAA,CAAAR,qBAAA,CAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,CAAAW,GAAA,UAAAI,IAAA,GAAAA,IAAA,CAAAV,GAAA,EAAAU,IAAA,CAAAC,GAAA,GAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,CAAAK,GAAA,CAAAI,IAAA,OAAAT,MAAA,CAAAK,GAAA,EAAAX,GAAA,CAAAW,GAAA,IAAAL,MAAA,YAAAN,GAAA,IAAAG,KAAA,EAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,CAAAM,MAAA,SAAAA,MAAA,UAAAJ,QAAAe,CAAA,mCAAAf,OAAA,oBAAAgB,MAAA,mBAAAA,MAAA,CAAAC,QAAA,UAAAF,CAAA,gBAAAA,CAAA,WAAAA,CAAA,SAAAA,CAAA,qBAAAC,MAAA,EAAAD,CAAA,CAAAG,WAAA,GAAAF,MAAA,EAAAD,CAAA,GAAAC,MAAA,CAAAN,SAAA,iBAAAK,CAAA,EAAAf,OAAA,CAAAe,CAAA,EAEjB,QAAS,CAAAI,YAAYA,CAACC,KAAK,CAAE,CAChC,GAAM,CAAAC,MAAM,CAAArB,OAAA,CAAUoB,KAAK,EAC3B,OAAQ,IAAI,EACR;AACR;AACA,WAEQ,IAAK,CAAAA,KAAK,GAAK,IAAI,CACnB,IAAK,CAAAC,MAAM,GAAK,UAAU,CACtB,MAAO,MAAM,CAEjB,IAAK,CAAAA,MAAM,GAAK,WAAW,CACvB,MAAO,WAAW,CAEtB,IAAK,CAAAA,MAAM,GAAK,QAAQ,CACpB,MAAO,CAAAD,KAAK,CAEhB,IAAK,CAAAC,MAAM,GAAK,QAAQ,CACxB,IAAK,CAAAD,KAAK,WAAY,CAAAE,MAAM,CAC5B,IAAK,CAAAD,MAAM,GAAK,SAAS,CACzB,IAAK,CAAAD,KAAK,WAAY,CAAAG,OAAO,CAC7B,IAAK,CAAAF,MAAM,GAAK,QAAQ,CACxB,IAAK,CAAAD,KAAK,WAAY,CAAAI,MAAM,CACxB,MAAO,CAAAJ,KAAK,CAACK,QAAQ,CAAC,CAAC,CAE3B,IAAK,CAAAJ,MAAM,GAAK,QAAQ,CACxB,IAAK,CAAAD,KAAK,WAAY,CAAAM,MAAM,CACxB,SAAAC,MAAA,CAAUP,KAAK,CAACK,QAAQ,CAAC,CAAC,MAE9B,QACI,MAAQ,UAAAG,IAAI,CAAI,CACZ,MAAO,CAAAA,IAAI,CAACC,KAAK,CAAC,QAAQ,CAAC,CACrBD,IAAI,CAACE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAACC,UAAU,CAAC,MAAK,CAAE,IAAG,CAAC,CACxCH,IACV,CAAC,CAAEI,IAAI,CAACC,SAAS,CAACb,KAAK,CAAC,CAChC,CACJ,CAEO,QAAS,CAAAc,aAAaA,CAACC,MAAM,CAAE,CAClC,GAAM,CAAAC,gBAAgB,CAAG,CAAC,CAAC,CAC3B,IAAK,GAAM,CAAA3B,GAAG,GAAI,CAAA0B,MAAM,CAAE,CACtBC,gBAAgB,CAAC3B,GAAG,CAAC,CAAGU,YAAY,CAACgB,MAAM,CAAC1B,GAAG,CAAC,CACpD,CACA,MAAO,CAAA2B,gBACX,CAEA,QAAS,CAAAC,WAAWA,CAACjB,KAAK,CAAE,CACxB,GAAI,QAAQ,CAACkB,IAAI,CAAClB,KAAK,CAAC,CAAE,CACtB,WAAAO,MAAA,CAAWP,KAAK,CAACW,UAAU,CAAC,IAAI,CAAE,MAAM,CAAC,CAACA,UAAU,CAAC,IAAG,CAAE,MAAK,CAAC,MACpE,CACA,MAAO,CAAAX,KACX,CAEA,QAAS,CAAAmB,OAAOA,CAACJ,MAAM,CAAE,CACrB,GAAI,CAAAK,OAAO,CAAG,EAAE,CAChB,IAAK,GAAM,CAAA/B,GAAG,GAAI,CAAA0B,MAAM,CAAE,CACtBK,OAAO,KAAAb,MAAA,CAAOlB,GAAG,MAAAkB,MAAA,CAAIU,WAAW,CAAClB,YAAY,CAACgB,MAAM,CAAC1B,GAAG,CAAC,CAAC,CAAC,MAC/D,CACA,MAAO,CAAA+B,OACX,CAEO,QAAS,CAAAC,SAASA,CAACN,MAAM,CAAiB,IAAf,CAAAO,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,MAAM,CAC3CrD,EAAE,CAACwD,aAAa,CAACJ,IAAI,CAAEH,OAAO,CAACJ,MAAM,CAAC,CAC1C"}