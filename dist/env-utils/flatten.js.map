{"version":3,"file":"flatten.js","names":["_fs","_interopRequireDefault","require","obj","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","flattenValue","value","typeOf","Number","Boolean","String","toString","BigInt","concat","json","match","slice","replaceAll","JSON","stringify","flattenValues","values","flatteningValues","key","escapeValue","test","flatten","content","flattenTo","file","arguments","length","undefined","fs","writeFileSync"],"sources":["../../src/env-utils/flatten.js"],"sourcesContent":["import fs from 'fs'\r\n\r\nexport function flattenValue(value) {\r\n    const typeOf = typeof value\r\n    switch (true) {\r\n        /**\r\n         * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures\r\n         */\r\n\r\n        case value === null:\r\n        case typeOf === 'function':\r\n            return 'null'\r\n\r\n        case typeOf === 'undefined':\r\n            return 'undefined'\r\n\r\n        case typeOf === 'string':\r\n            return value\r\n\r\n        case typeOf === 'number':\r\n        case value instanceof Number:\r\n        case typeOf === 'boolean':\r\n        case value instanceof Boolean:\r\n        case typeOf === 'symbol':\r\n        case value instanceof String:\r\n            return value.toString()\r\n\r\n        case typeOf === 'bigint':\r\n        case value instanceof BigInt:\r\n            return `${value.toString()}n`\r\n\r\n        default:\r\n            return (json => {\r\n                return json.match(/^\".*\"$/)\r\n                    ? json.slice(1, -1).replaceAll('\\\\\"', '\"')\r\n                    : json\r\n            })(JSON.stringify(value))\r\n    }\r\n}\r\n\r\nexport function flattenValues(values) {\r\n    const flatteningValues = {}\r\n    for (const key in values) {\r\n        flatteningValues[key] = flattenValue(values[key])\r\n    }\r\n    return flatteningValues\r\n}\r\n\r\nfunction escapeValue(value) {\r\n    if (/[\\s#]+/.test(value)) {\r\n        return `\"${value.replaceAll('\\\\', '\\\\\\\\').replaceAll('\"', '\\\\\"')}\"`\r\n    }\r\n    return value\r\n}\r\n\r\nexport function flatten(values) {\r\n    let content = ''\r\n    for (const key in values) {\r\n        content += `${key}=${escapeValue(flattenValue(values[key]))}\\n`\r\n    }\r\n    return content\r\n}\r\n\r\nexport function flattenTo(values, file = '.env') {\r\n    fs.writeFileSync(file, flatten(values))\r\n}\r\n"],"mappings":"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"}