{"version":3,"file":"restore.js","names":["NUMBER_REGEX","exports","BIGINT_REGEX","SYMBOL_REGEX","ARRAY_REGEX","JSON_REGEX","NULL_VALUES","UNDEFINED_VALUES","TRUE_VALUES","FALSE_VALUES","NAN_VALUES","INFINITY_VALUES","unescapeValue","value","replaceAll","restoreValue","fromDotEnv","arguments","length","undefined","includes","concat","test","Number","BigInt","slice","Symbol","JSON","parse","e","restoreValues","values","restoringValues","key"],"sources":["../../src/env-utils/restore.js"],"sourcesContent":["export const NUMBER_REGEX = /^[+-]?((\\d+(\\.(\\d*)?)?)|(\\.\\d+))(e[+-]?\\d+)?$/i\r\nexport const BIGINT_REGEX = /^[+-]?\\d+n$/\r\nexport const SYMBOL_REGEX = /^Symbol\\(.*\\)$/\r\nexport const ARRAY_REGEX = /^\\[.*\\]$/\r\nexport const JSON_REGEX = /^\\{.*\\}$/\r\nexport const NULL_VALUES = ['null', 'Null', 'NULL']\r\nexport const UNDEFINED_VALUES = ['undefined', 'UNDEFINED']\r\nexport const TRUE_VALUES = ['true', 'True', 'TRUE', 'yes', 'Yes', 'YES']\r\nexport const FALSE_VALUES = ['false', 'False', 'FALSE', 'no', 'No', 'NO']\r\nexport const NAN_VALUES = ['NaN']\r\nexport const INFINITY_VALUES = ['Infinity', '-Infinity', '+Infinity']\r\n\r\nfunction unescapeValue(value) {\r\n    return value.replaceAll('\\\\\"', '\"').replaceAll('\\\\\\\\', '\\\\')\r\n}\r\n\r\nexport function restoreValue(value, fromDotEnv = true) {\r\n    switch (true) {\r\n        case NULL_VALUES.includes(value):\r\n            return null\r\n\r\n        case UNDEFINED_VALUES.includes(value):\r\n            return undefined\r\n\r\n        case TRUE_VALUES.includes(value):\r\n            return true\r\n        case FALSE_VALUES.includes(value):\r\n            return false\r\n\r\n        case [...NAN_VALUES, ...INFINITY_VALUES].includes(value):\r\n        case NUMBER_REGEX.test(value):\r\n            return Number(value)\r\n\r\n        case BIGINT_REGEX.test(value):\r\n            return BigInt(value.slice(0, -1))\r\n\r\n        default:\r\n            if (fromDotEnv) {\r\n                value = unescapeValue(value)\r\n            }\r\n\r\n            switch (true) {\r\n                case SYMBOL_REGEX.test(value):\r\n                    return Symbol(value.slice(7, -1))\r\n\r\n                case ARRAY_REGEX.test(value):\r\n                case JSON_REGEX.test(value):\r\n                    try {\r\n                        return JSON.parse(value)\r\n                    }\r\n                    catch (e) {\r\n                        return value\r\n                    }\r\n\r\n                default:\r\n                    return value\r\n            }\r\n    }\r\n}\r\n\r\nexport function restoreValues(values, fromDotEnv = true) {\r\n    const restoringValues = {}\r\n    for (const key in values) {\r\n        restoringValues[key] = restoreValue(values[key], fromDotEnv)\r\n    }\r\n    return restoringValues\r\n}\r\n"],"mappings":"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"}