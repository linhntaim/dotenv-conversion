{"version":3,"file":"index.js","names":["NUMBER_REGEX","BIGINT_REGEX","SYMBOL_REGEX","ARRAY_REGEX","JSON_REGEX","NULL_VALUES","UNDEFINED_VALUES","TRUE_VALUES","FALSE_VALUES","NAN_VALUES","INFINITY_VALUES","unescapeValue","value","replaceAll","restoreValue","fromDotEnv","trimmed","trim","includes","undefined","concat","test","Number","BigInt","slice","Symbol","JSON","parse","e","v","flattenValue","typeOf","_typeof","Boolean","String","toString","stringify","INTEGER_REGEX","FORCING_FALSE_VALUES","defaultConfig","parsed","ignoreProcessEnv","prevents","specs","methods","auto","name","config","lTrimmed","replace","findPossibleMethod","find","method","startsWith","possibleMethod","Object","keys","substring","length","methodAliases","string","boolean","isNumber","isBigInt","number","parseFloat","isNaN","bigint","isInteger","parseInt","symbol","array","json","bool","num","big","str","arr","obj","mergeConfig","mergingConfig","assign","alias","convertValue","convert","arguments","environment","process","env","configKey","prototype","hasOwnProperty","call","processKey","_default","exports"],"sources":["../src/index.js"],"sourcesContent":["/**\r\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures\r\n */\r\n\r\n/* region env-utils */\r\n\r\nconst NUMBER_REGEX = /^[+-]?((\\d+(\\.(\\d*)?)?)|(\\.\\d+))(e[+-]?\\d+)?$/i\r\nconst BIGINT_REGEX = /^[+-]?\\d+n$/\r\nconst SYMBOL_REGEX = /^Symbol\\(.*\\)$/\r\nconst ARRAY_REGEX = /^\\[.*\\]$/\r\nconst JSON_REGEX = /^\\{.*\\}$/\r\nconst NULL_VALUES = ['null', 'Null', 'NULL']\r\nconst UNDEFINED_VALUES = ['undefined', 'UNDEFINED']\r\nconst TRUE_VALUES = ['true', 'True', 'TRUE', 'yes', 'Yes', 'YES']\r\nconst FALSE_VALUES = ['false', 'False', 'FALSE', 'no', 'No', 'NO']\r\nconst NAN_VALUES = ['NaN']\r\nconst INFINITY_VALUES = ['Infinity', '-Infinity', '+Infinity']\r\n\r\nfunction unescapeValue(value) {\r\n    return value.replaceAll('\\\\\"', '\"').replaceAll('\\\\\\\\', '\\\\')\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} value\r\n * @param {boolean} fromDotEnv\r\n * @returns {null|undefined|boolean|number|bigint|string|symbol|array|object}\r\n */\r\nfunction restoreValue(value, fromDotEnv) {\r\n    let trimmed = value.trim()\r\n    switch (true) {\r\n        case NULL_VALUES.includes(trimmed):\r\n            return null\r\n\r\n        case UNDEFINED_VALUES.includes(trimmed):\r\n            return undefined\r\n\r\n        case TRUE_VALUES.includes(trimmed):\r\n            return true\r\n        case FALSE_VALUES.includes(trimmed):\r\n            return false\r\n\r\n        case [...NAN_VALUES, ...INFINITY_VALUES].includes(trimmed):\r\n        case NUMBER_REGEX.test(trimmed):\r\n            return Number(trimmed)\r\n\r\n        case BIGINT_REGEX.test(trimmed):\r\n            return BigInt(trimmed.slice(0, -1))\r\n\r\n        default:\r\n            if (fromDotEnv) {\r\n                value = unescapeValue(value)\r\n                trimmed = value.trim()\r\n            }\r\n\r\n            switch (true) {\r\n                case SYMBOL_REGEX.test(trimmed):\r\n                    return Symbol(trimmed.slice(7, -1))\r\n\r\n                case ARRAY_REGEX.test(trimmed):\r\n                case JSON_REGEX.test(trimmed):\r\n                    try {\r\n                        return JSON.parse(trimmed)\r\n                    }\r\n                    catch (e) {\r\n                        return value\r\n                    }\r\n\r\n                default:\r\n                    let v\r\n                    v = `[${trimmed}]`\r\n                    if (ARRAY_REGEX.test(v)) {\r\n                        try {\r\n                            return JSON.parse(v)\r\n                        }\r\n                        catch (e) {\r\n                        }\r\n                    }\r\n                    v = `{${trimmed}}`\r\n                    if (JSON_REGEX.test(v)) {\r\n                        try {\r\n                            return JSON.parse(v)\r\n                        }\r\n                        catch (e) {\r\n                        }\r\n                    }\r\n                    return value\r\n            }\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param {null|undefined|boolean|number|bigint|string|symbol|array|object} value\r\n * @returns {string}\r\n */\r\nfunction flattenValue(value) {\r\n    const typeOf = typeof value\r\n\r\n    switch (true) {\r\n        case value === null:\r\n        case typeOf === 'function':\r\n            return 'null'\r\n\r\n        case typeOf === 'undefined':\r\n            return 'undefined'\r\n\r\n        case typeOf === 'string':\r\n            return value\r\n\r\n        case typeOf === 'number':\r\n        case value instanceof Number:\r\n        case typeOf === 'boolean':\r\n        case value instanceof Boolean:\r\n        case typeOf === 'symbol':\r\n        case value instanceof String:\r\n            return value.toString()\r\n\r\n        case typeOf === 'bigint':\r\n        case value instanceof BigInt:\r\n            return `${value.toString()}n`\r\n\r\n        default:\r\n            return JSON.stringify(value)\r\n    }\r\n}\r\n\r\n/* endregion */\r\n\r\nconst INTEGER_REGEX = /^[+-]?\\d+$/\r\nconst FORCING_FALSE_VALUES = [\r\n    ...FALSE_VALUES,\r\n    ...NULL_VALUES,\r\n    ...UNDEFINED_VALUES,\r\n    ...NAN_VALUES,\r\n    'not', 'Not', 'NOT',\r\n    'none', 'None', 'NONE',\r\n]\r\n\r\nfunction defaultConfig() {\r\n    return {\r\n        parsed: {},\r\n        fromDotEnv: true,\r\n        ignoreProcessEnv: false,\r\n        prevents: [],\r\n        specs: {},\r\n        methods: {\r\n            auto(value, name, config) {\r\n                value = restoreValue(value, config.fromDotEnv)\r\n                if (typeof value === 'string') {\r\n                    const lTrimmed = value.replace(/^\\s+/, '')\r\n                    const findPossibleMethod = methods => methods.find(method => lTrimmed.startsWith(`${method}:`))\r\n                    let possibleMethod\r\n                    // find in methods\r\n                    possibleMethod = findPossibleMethod(Object.keys(this))\r\n                    if (possibleMethod) {\r\n                        return this[possibleMethod](\r\n                            lTrimmed.substring(possibleMethod.length + 1),\r\n                            name,\r\n                            config,\r\n                        )\r\n                    }\r\n                    // find in aliases\r\n                    possibleMethod = findPossibleMethod(Object.keys(config.methodAliases))\r\n                    if (possibleMethod) {\r\n                        return this[config.methodAliases[possibleMethod]](\r\n                            lTrimmed.substring(possibleMethod.length + 1),\r\n                            name,\r\n                            config,\r\n                        )\r\n                    }\r\n                    return this.string(value)\r\n                }\r\n                return value\r\n            },\r\n            boolean(value) {\r\n                value = value.trim()\r\n                if (!value) {\r\n                    return false\r\n                }\r\n                return !FORCING_FALSE_VALUES.includes(value)\r\n                    && ((isNumber, isBigInt) => {\r\n                        return (!isNumber && !isBigInt)\r\n                            || (isNumber && Number(value) !== 0)\r\n                            || (isBigInt && BigInt(value.slice(0, -1)) !== 0n)\r\n                    })(NUMBER_REGEX.test(value), BIGINT_REGEX.test(value))\r\n            },\r\n            number(value) {\r\n                value = value.trim()\r\n                if (!value) {\r\n                    return 0\r\n                }\r\n                if (TRUE_VALUES.includes(value)) {\r\n                    return 1\r\n                }\r\n                if (FORCING_FALSE_VALUES.includes(value)) {\r\n                    return 0\r\n                }\r\n                value = parseFloat(value)\r\n                return Number.isNaN(value) ? 0 : value\r\n            },\r\n            bigint(value) {\r\n                value = value.trim()\r\n                if (!value) {\r\n                    return 0n\r\n                }\r\n                if (TRUE_VALUES.includes(value)) {\r\n                    return 1n\r\n                }\r\n                if (FORCING_FALSE_VALUES.includes(value)) {\r\n                    return 0n\r\n                }\r\n                if (INTEGER_REGEX.test(value)) {\r\n                    return BigInt(value)\r\n                }\r\n                if (BIGINT_REGEX.test(value)) {\r\n                    return BigInt(value.slice(0, -1))\r\n                }\r\n                value = parseFloat(value)\r\n                switch (true) {\r\n                    case Number.isNaN(value):\r\n                        return 0n\r\n                    case Number.isInteger(value):\r\n                        return BigInt(value)\r\n                    default:\r\n                        return BigInt(parseInt(value))\r\n                }\r\n            },\r\n            string(value) {\r\n                return value\r\n            },\r\n            symbol(value) {\r\n                const trimmed = value.trim()\r\n                if (SYMBOL_REGEX.test(trimmed)) {\r\n                    return Symbol(trimmed.slice(7, -1))\r\n                }\r\n                return Symbol(value)\r\n            },\r\n            array(value) {\r\n                const trimmed = value.trim()\r\n                if (!trimmed) {\r\n                    return []\r\n                }\r\n                try {\r\n                    return JSON.parse(\r\n                        ARRAY_REGEX.test(trimmed)\r\n                            ? trimmed\r\n                            : `[${trimmed}]`,\r\n                    )\r\n                }\r\n                catch (e) {\r\n                    return this.string(value)\r\n                }\r\n            },\r\n            json(value) {\r\n                const trimmed = value.trim()\r\n                if (!trimmed) {\r\n                    return {}\r\n                }\r\n                try {\r\n                    return JSON.parse(\r\n                        JSON_REGEX.test(trimmed)\r\n                            ? trimmed\r\n                            : `{${trimmed}}`,\r\n                    )\r\n                }\r\n                catch (e) {\r\n                    return this.string(value)\r\n                }\r\n            },\r\n        },\r\n        methodAliases: {\r\n            bool: 'boolean',\r\n            num: 'number',\r\n            big: 'bigint',\r\n            str: 'string',\r\n            arr: 'array',\r\n            obj: 'json',\r\n        },\r\n    }\r\n}\r\n\r\nfunction mergeConfig(config) {\r\n    const mergingConfig = defaultConfig()\r\n    if ('parsed' in config) {\r\n        mergingConfig.parsed = config.parsed\r\n    }\r\n    if ('fromDotEnv' in config) {\r\n        mergingConfig.fromDotEnv = config.fromDotEnv\r\n    }\r\n    if ('ignoreProcessEnv' in config) {\r\n        mergingConfig.ignoreProcessEnv = config.ignoreProcessEnv\r\n    }\r\n    if ('prevents' in config) {\r\n        mergingConfig.prevents = config.prevents\r\n    }\r\n    if ('specs' in config) {\r\n        mergingConfig.specs = config.specs\r\n    }\r\n    if ('methods' in config) {\r\n        Object.assign(mergingConfig.methods, config.methods)\r\n    }\r\n    if ('methodAliases' in config) {\r\n        for (const alias in config.methodAliases) {\r\n            // not override existing alias\r\n            if (alias in mergingConfig.methodAliases) {\r\n                continue\r\n            }\r\n            // not use name of existing methods or aliases\r\n            if (alias in mergingConfig.methods) {\r\n                continue\r\n            }\r\n            // only add alias to existing methods\r\n            const method = config.methodAliases[alias]\r\n            if (method in mergingConfig.methods) {\r\n                mergingConfig.methodAliases[alias] = method\r\n            }\r\n        }\r\n    }\r\n    return mergingConfig\r\n}\r\n\r\nfunction convertValue(value, name, config) {\r\n    if (config.prevents.includes(name)) {\r\n        return value\r\n    }\r\n\r\n    if (name in config.specs) {\r\n        const method = config.specs[name]\r\n        switch (typeof method) {\r\n            case 'string':\r\n                if (method in config.methods) {\r\n                    return config.methods[method](value, name, config)\r\n                }\r\n                if (method in config.methodAliases) {\r\n                    return config.methods[config.methodAliases[method]](value, name, config)\r\n                }\r\n                return config.methods.string(value, name, config)\r\n            case 'function':\r\n                return method(value, name, config)\r\n            default:\r\n                return config.methods.string(value, name, config)\r\n        }\r\n    }\r\n\r\n    return config.methods.auto(value, name, config)\r\n}\r\n\r\nfunction convert(config = {}) {\r\n    config = mergeConfig(config)\r\n\r\n    const environment = config.ignoreProcessEnv ? {} : process.env\r\n\r\n    for (const configKey in config.parsed) {\r\n        const value = Object.prototype.hasOwnProperty.call(environment, configKey)\r\n            ? environment[configKey]\r\n            : config.parsed[configKey]\r\n\r\n        config.parsed[configKey] = convertValue(value, configKey, config)\r\n    }\r\n\r\n    for (const processKey in config.parsed) {\r\n        environment[processKey] = flattenValue(config.parsed[processKey])\r\n    }\r\n\r\n    return config\r\n}\r\n\r\nexport default {convert}\r\n"],"mappings":"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"}