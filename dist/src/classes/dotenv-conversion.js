"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var NUMBER_REGEX=/^(\+|-)?\d+(\.\d+)?(e(\+|-)?\d+)?$/i;var DotEnvConversion=/*#__PURE__*/function(){function DotEnvConversion(){_classCallCheck(this,DotEnvConversion);this.defaultConfig={methods:{auto:function auto(value){if(!value)return value;var vCased=value.toLowerCase().trim();if(vCased==="null"){return this["null"]()}if(vCased==="true"||vCased==="false"||vCased==="yes"||vCased==="no"){return this.bool(value)}if(NUMBER_REGEX.test(vCased)){return this.number(value)}if(vCased.startsWith("raw:")){return this.raw(value.substr(4))}if(vCased.startsWith("bool:")){return this.bool(value.substr(5))}if(vCased.startsWith("number:")){return this.number(value.substr(7))}if(vCased.startsWith("array:")){return this.array(value.substr(6))}if(vCased.startsWith("json:")){return this.json(value.substr(5))}return this.json(value)},raw:function raw(value){return value},"null":function _null(){return""},bool:function bool(value){if(!value)return false;value=value.toLowerCase().trim();return!["","false","null","no","not","none","undefined","nan"].includes(value)&&(!NUMBER_REGEX.test(value)||parseFloat(value)!==0)},number:function number(value){if(!value)return 0;value=parseFloat(value);return isNaN(value)?0:value},array:function array(value){if(!value)return[];return value.split(/(?<!\\),/).map(function(v){return v.replace(/\\,/,",")})},json:function json(value){if(!value)return{};try{return JSON.parse(value)}catch(e){return value}}},specs:{},prevents:[]};this.config={};this.env={}}_createClass(DotEnvConversion,[{key:"setConfig",value:function setConfig(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var override=config.override?config.override:null;delete config.override;this.config=Object.assign({},this.defaultConfig,config);if(override){Object.assign(this.config.methods,override)}return this}},{key:"make",value:function make(){var dotenvConfig=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.setConfig(config);this.env={};var parsed=dotenvConfig.hasOwnProperty("parsed")?dotenvConfig.parsed:{};for(var name in parsed){parsed[name]=this.convert(name,parsed[name])}var ignoreProcessEnv=dotenvConfig.hasOwnProperty("ignoreProcessEnv");var environment=process.env;if(ignoreProcessEnv){for(var _name in environment){var value=parsed.hasOwnProperty(_name)?parsed[_name]:this.convert(_name,environment[_name]);this.env[_name]=value}}else{for(var _name2 in environment){var _value=parsed.hasOwnProperty(_name2)?parsed[_name2]:this.convert(_name2,environment[_name2]);this.env[_name2]=_value;environment[_name2]=["boolean","number","string"].includes(_typeof(_value))?_value:JSON.stringify(_value)}}return dotenvConfig}},{key:"convert",value:function convert(name,value){if(this.config.prevents.includes(name)){return value}var method=this.config.specs.hasOwnProperty(name)?this.config.specs[name]:"auto";switch(_typeof(method)){case"string":if(this.config.methods.hasOwnProperty(method)){return this.config.methods[method](value)}return value;case"function":return method(value);default:return value;}}},{key:"getenv",value:function getenv(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return name?this.env.hasOwnProperty(name)?this.env[name]:"":this.env}}]);return DotEnvConversion}();exports["default"]=DotEnvConversion;
//# sourceMappingURL=dotenv-conversion.js.map